{
  // It's no CMake... but it'll do (I h8 CMake)
  "version": "2.0.0",
  "tasks": [
    {
      "label": "build",
      "type": "shell",
      "command": "npx",
      "args": ["tsc", "--build"],
      "group": "build",
      "problemMatcher": ["$tsc"],
      "dependsOn": ["clean: create dist"]
    },
    {
      "label": "build: tests",
      "type": "shell",
      "command": "npx",
      "args": ["tsc", "--build", "tsconfig.tests.json"],
      "dependsOn": ["copy: test data"]
    },
    {
      "label": "clean: remove dist",
      "type": "shell",
      "windows": {
        "command": "rm -r dist || 1"
      },
      "osx": {
        "command": "rm -rf ./dist || true"
      },
      "linux": {
        "command": "rm -rf ./dist || true"
      }
    },
    {
      "label": "clean: create dist",
      "type": "shell",
      "command": "mkdir",
      "args": ["dist"],
      "problemMatcher": [],
      "dependsOn": ["clean: remove dist"]
    },
    {
      "label": "copy: test data",
      "type": "shell",
      "windows": {
        "command": "cpy",
        "args": ["tests/data/**/*", "dist/tests/data", "--flat=false"]
      },
      "osx": {
        "command": "rsync",
        "args": ["-a", "--delete", "${workspaceFolder}/tests/data/", "${workspaceFolder}/dist/tests/data/"]
      },
      "linux": {
        "command": "rsync",
        "args": ["-a", "--delete", "${workspaceFolder}/tests/data/", "${workspaceFolder}/dist/tests/data/"]
      },
      "problemMatcher": [],
      "dependsOn": ["clean: create dist"]
    },
    {
      "label": "compound: pretest",
      "dependsOn": ["build: tests"],
      "problemMatcher": []
    }
  ]
}
